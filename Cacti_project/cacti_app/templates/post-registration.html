{% extends 'default.html' %}

{% block body %}

<div class="section no-pad-bot" id="index-banner">
    <div class="container" id="form">
        <br>
        <h1 class="header center orange-text">Cacti</h1>
        <div class="row center">
            <h5 class="header col s12 light">Add a time frame when you're not free. We'll keep track of this.</h5>
        </div>
        {% include "schedule_form.html" %}
    </div>
</div>

<!-- Jquery imports -->
{% include "scripts.html" %}
<script type="text/javascript" src="/static/js/datecheck.js"></script>
<!-- Initialization -->
<script>
	$(document).ready(function () {
		$('select').material_select();

        $("#submit").click(function () {
            $("#form").clone().appendTo("#form");
        });

        $('#ajax-test').click(function (e) {
            var startTime = $('#start_time').val().split(':');
            var endTime = $('#end_time').val().split(':');
            if (areDatesCorrect(startTime, endTime)) {
                $.ajax(
                    {
                        type: "POST",
                        url: "{{ schedule_process }}",
                        data: $("#sched_form").serializeArray(),
                        success: function (data) {
                            console.log(data);
                        },
                        error: function (err) {
                            console.log(err);
                        },
                        datatype: "json"
                    }
                )
            }
            else {
                $("#start_error").load("error_messages.html");
                $("#end_error").load("error_messages.html");
                e.preventDefault();
            }
            e.preventDefault();
        });
	});
</script>

{% endblock %}
